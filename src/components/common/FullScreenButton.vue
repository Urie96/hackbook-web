<template>
  <div
    v-if="canFullScreen"
    class="urie__fullscreen hover-big hover-color"
    @click="toggleFullScreen"
  >
    <slot name="isFullScreen" v-if="isFullScreen">
      <svg
        t="1609399381595"
        class="icon"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="23560"
        width="20"
        height="20"
      >
        <path
          d="M957.741176 271.058824h-126.494117l138.541176-138.541177c24.094118-24.094118 24.094118-60.235294 0-78.305882-24.094118-18.070588-60.235294-24.094118-78.305882 0l-138.541177 138.541176V66.258824c0-18.070588-12.047059-30.117647-30.117647-30.117648h-60.235294c-18.070588 0-30.117647 12.047059-30.117647 30.117648V361.411765c0 18.070588 12.047059 30.117647 30.117647 30.117647h295.152941c18.070588 0 30.117647-12.047059 30.117648-30.117647V301.176471c0-18.070588-12.047059-30.117647-30.117648-30.117647z m-596.329411 361.411764H96.376471c-30.117647 0-60.235294 24.094118-60.235295 60.235294 0 30.117647 24.094118 60.235294 60.235295 60.235294h96.37647L54.211765 891.482353c-24.094118 24.094118-24.094118 60.235294 0 78.305882 24.094118 18.070588 60.235294 24.094118 78.305882 0l138.541177-138.541176v126.494117c0 18.070588 12.047059 30.117647 30.117647 30.117648h60.235294c18.070588 0 30.117647-12.047059 30.117647-30.117648V662.588235c0-18.070588-12.047059-30.117647-30.117647-30.117647zM361.411765 36.141176H301.176471c-18.070588 0-30.117647 12.047059-30.117647 30.117648v126.494117L132.517647 54.211765C108.423529 30.117647 72.282353 30.117647 54.211765 54.211765c-18.070588 24.094118-24.094118 60.235294 0 78.305882l138.541176 138.541177H66.258824c-18.070588 0-30.117647 12.047059-30.117648 30.117647v60.235294c0 18.070588 12.047059 30.117647 30.117648 30.117647H361.411765c18.070588 0 30.117647-12.047059 30.117647-30.117647V66.258824c0-18.070588-12.047059-30.117647-30.117647-30.117648z m596.329411 596.329412H662.588235c-6.023529 0-18.070588 6.023529-18.070588 6.02353-6.023529 6.023529-6.023529 12.047059-6.023529 18.070588v295.152941c0 18.070588 12.047059 30.117647 30.117647 30.117647h60.235294c18.070588 0 30.117647-12.047059 30.117647-30.117647v-126.494118l138.541176 138.541177c24.094118 24.094118 60.235294 24.094118 78.305883 0 18.070588-24.094118 24.094118-60.235294 0-78.305882l-138.541177-138.541177H963.764706c18.070588 0 30.117647-12.047059 30.117647-30.117647v-60.235294c-6.023529-12.047059-18.070588-24.094118-36.141177-24.094118z"
          p-id="23561"
        ></path>
      </svg>
    </slot>
    <slot name="notFullScreen" v-else>
      <svg
        t="1609397032562"
        class="icon"
        viewBox="0 0 1024 1024"
        version="1.1"
        xmlns="http://www.w3.org/2000/svg"
        p-id="23430"
        width="20"
        height="20"
      >
        <path
          d="M402.24 595.84a56.96 56.96 0 0 0-80.64-6.4L187.52 704a331.52 331.52 0 0 1 8-49.28 60.8 60.8 0 1 0-117.76-29.44 560 560 0 0 0 0 244.16 60.8 60.8 0 0 0 44.16 44.16 560 560 0 0 0 244.16 0 60.8 60.8 0 1 0-29.44-117.76 416 416 0 0 1-48.64 8.32l114.56-133.76a57.28 57.28 0 0 0-0.32-74.56z m187.52-200a56.96 56.96 0 0 0 80.64 6.4L804.48 288a331.52 331.52 0 0 1-8 49.28 60.8 60.8 0 1 0 117.76 29.44 560 560 0 0 0 0-244.16 60.8 60.8 0 0 0-44.16-44.16 560 560 0 0 0-244.16 0 60.8 60.8 0 1 0 29.44 117.76A416 416 0 0 1 704 187.84l-114.56 133.76a57.28 57.28 0 0 0 0.32 74.24z m-438.4 14.08a60.8 60.8 0 0 0 44.16-73.6A416 416 0 0 1 187.84 288l133.76 114.56a56.96 56.96 0 0 0 80.64-80.64L288 187.2a332.16 332.16 0 0 1 49.28 8 60.8 60.8 0 1 0 29.44-117.76 560 560 0 0 0-244.16 0 60.8 60.8 0 0 0-44.8 44.48 560 560 0 0 0 0 244.16 60.8 60.8 0 0 0 73.6 44.16z m762.88 215.68a60.8 60.8 0 1 0-117.76 29.44 416 416 0 0 1 7.68 48.96l-133.76-114.56a56.96 56.96 0 0 0-80.64 80.64l114.24 134.4a331.84 331.84 0 0 1-49.28-8 60.8 60.8 0 1 0-29.44 117.76 560 560 0 0 0 244.16 0 60.8 60.8 0 0 0 44.16-44.16 560 560 0 0 0 0.64-244.16z"
          p-id="23431"
        ></path>
      </svg>
    </slot>
  </div>
</template>

<script>
import { ref, onActivated } from 'vue';

export default {
  setup() {
    const html = document.documentElement;
    const rfs =
      html.requestFullScreen ||
      html.webkitRequestFullScreen ||
      html.mozRequestFullScreen ||
      html.msRequestFullScreen;

    const cfs =
      document.exitFullscreen ||
      document.mozCancelFullScreen ||
      document.webkitExitFullscreen ||
      document.msExitFullscreen;

    const canFullScreen = ref(!!rfs);
    const isFullScreen = ref(false);

    const loadIsFullScreen = () => {
      isFullScreen.value =
        document.fullScreenElement === html ||
        document.msFullscreenElement === html ||
        document.mozFullScreenElement === html ||
        document.webkitFullscreenElement === html ||
        false;
    };

    onActivated(loadIsFullScreen);

    const toggleFullScreen = () => {
      if (isFullScreen.value) {
        cfs.call(document);
        isFullScreen.value = false;
      } else {
        rfs.call(html);
        isFullScreen.value = true;
      }
    };

    return { canFullScreen, isFullScreen, toggleFullScreen };
  },
};
</script>

<style lang="stylus" scoped>
.urie__fullscreen {
  height: 20px;
  color: #aaa;

  svg {
    fill: currentcolor;
    height: 100%;
  }
}
</style>